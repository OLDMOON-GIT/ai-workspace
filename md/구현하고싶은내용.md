# 구현하고싶은 내용

## task_lock 통합 (나중에 구현)

**제안일:** 2025-12-03

**현재 문제:**
- 메인에서 컨텐츠 등록 시 `content` 테이블만 사용
- `task`, `task_lock`, `task_queue`를 사용하지 않음
- 리소스 충돌 가능성 존재 (task_id=content_id인데 lock 없음)

**구현 내용:**
컨텐츠 등록 시 다음 테이블 모두 사용:
1. `content` - 컨텐츠 정보
2. `task` - 작업 추적
3. `task_lock` - 리소스 잠금 (성공/실패/타임아웃 시 해제)
4. `task_queue` - 대기열에 큐잉

**이유:**
- task_id = content_id로 통합했으므로
- 등록 시부터 task_lock을 잡아야 리소스 충돌 방지
- 대기열 시스템과 일관성 유지

**영향받는 파일:**
- `src/lib/content.ts` - createContent()
- `src/app/api/scripts/generate/route.ts` - 대본 생성
- 기타 컨텐츠 등록 API들

**우선순위:** 낮음 (현재 시스템이 동작하고 있으므로)

---

## 추가 구현 아이디어는 이 파일에 계속 추가
