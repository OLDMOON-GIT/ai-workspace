# BTS-0000034: Flow ì´ë¯¸ì§€ ìƒì„± ëª¨ë“œ ì¶”ê°€

**ë°œìƒì¼:** 2025-12-03

**ìƒíƒœ:** ğŸŸ¡ **ë¶€ë¶„ì™„ë£Œ** - UI/API/Worker ì™„ë£Œ, Python êµ¬í˜„ ëŒ€ê¸°

**ì‹¬ê°ë„:** ğŸŸ¢ **ENHANCEMENT** - ì‹ ê·œ ê¸°ëŠ¥ ì¶”ê°€

**ìš”ì²­:**
Google Labsì˜ Flow ë„êµ¬ë¥¼ ì´ë¯¸ì§€ ìƒì„± ëª¨ë“œì— ì¶”ê°€
- URL: https://labs.google/fx/ko/tools/flow/project/

**í˜„ì¬ ì´ë¯¸ì§€ ëª¨ë“œ:**
1. ImageFX + Whisk: ì²« ì´ë¯¸ì§€ë¥¼ ImageFXë¡œ ìƒì„± í›„ Whiskì— ì—…ë¡œë“œ
2. Whiskë§Œ ì‚¬ìš©: Whiskë¡œë§Œ ì´ë¯¸ì§€ ìƒì„±

**ì¶”ê°€í•  ëª¨ë“œ:**
3. Flow: Google Labs Flowë¡œ ì´ë¯¸ì§€ ìƒì„±

**êµ¬í˜„ ê³„íš:**

**1. Frontend (automation/page.tsx:5757-5796)**
```typescript
// ê¸°ì¡´: executeImageCrawling(useImageFX: boolean)
// ë³€ê²½: executeImageCrawling(imageMode: 'imagefx' | 'whisk' | 'flow')

// ëª¨ë‹¬ì— Flow ë²„íŠ¼ ì¶”ê°€
<button onClick={() => executeImageCrawling('flow')}>
  ğŸ¯ Flow
  <p>Google Labs Flowë¡œ ì´ë¯¸ì§€ ìƒì„±</p>
</button>
```

**2. API (/api/images/crawl/route.ts)**
```typescript
// useImageFX ëŒ€ì‹  imageMode íŒŒë¼ë¯¸í„° ì‚¬ìš©
const { scenes, contentId, format, imageMode } = await req.json();
// story.jsonì— imageMode ì €ì¥
```

**3. Worker (image-worker.ts:122, 176-212)**
```typescript
// metadataì—ì„œ imageMode ì½ê¸°
const { imageMode } = metadata || {};
// Pythonì— imageMode ì „ë‹¬
if (imageMode === 'imagefx') pythonArgs.push('--use-imagefx');
else if (imageMode === 'flow') pythonArgs.push('--use-flow');
```

**4. Backend (image_crawler_working.py)**
```python
# --use-flow ì¸ì ì¶”ê°€
parser.add_argument('--use-flow', action='store_true', help='Flowë¡œ ì´ë¯¸ì§€ ìƒì„±')

# Flow í˜ì´ì§€ ì ‘ì† ë° ì´ë¯¸ì§€ ìƒì„± í•¨ìˆ˜ ì¶”ê°€
def generate_image_with_flow(driver, prompt, aspect_ratio):
    driver.get('https://labs.google/fx/ko/tools/flow/project/')
    # Flow UI ìë™í™” ë¡œì§...
```

**ì™„ë£Œëœ ì‘ì—…:**

1. âœ… **Frontend (automation/page.tsx)**
   - executeImageCrawling í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ë³€ê²½: `boolean` â†’ `'imagefx' | 'whisk' | 'flow'`
   - ëª¨ë‹¬ì— Flow ë²„íŠ¼ ì¶”ê°€ (ì˜¤ë Œì§€-ë ˆë“œ ê·¸ë¼ë°ì´ì…˜, NEW ë±ƒì§€)
   - APIì— imageMode ì „ë‹¬

2. âœ… **API (/api/images/crawl/route.ts)**
   - useImageFX â†’ imageMode íŒŒë¼ë¯¸í„° ë³€ê²½
   - story.json metadataì— imageMode ì €ì¥
   - Python ìŠ¤í¬ë¦½íŠ¸ì— --use-flow í”Œë˜ê·¸ ì „ë‹¬

3. âœ… **Worker (unified-worker.js)**
   - metadata.imageMode ì§€ì›
   - ê¸°ì¡´ useImageFX í•˜ìœ„í˜¸í™˜ ìœ ì§€
   - Python argsì— --use-flow ì¶”ê°€

4. âœ… **Backend (image_crawler_working.py)**
   - --use-flow ì¸ì ì¶”ê°€
   - main í•¨ìˆ˜ì— use_flow íŒŒë¼ë¯¸í„° ì¶”ê°€
   - TODO ì£¼ì„ìœ¼ë¡œ êµ¬í˜„ ìœ„ì¹˜ ë§ˆí‚¹

**ë¯¸ì™„ë£Œ ì‘ì—…:**

1. â³ **Flow UI ìë™í™” êµ¬í˜„**
   - `https://labs.google/fx/ko/tools/flow/project/` ì ‘ì†
   - í”„ë¡¬í”„íŠ¸ ì…ë ¥ ë° ì´ë¯¸ì§€ ìƒì„± ìë™í™”
   - ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ë¡œì§
   - í˜„ì¬: Whisk í´ë°± ë©”ì‹œì§€ ì¶œë ¥

**ìˆ˜ì •ëœ íŒŒì¼:**
- `trend-video-frontend/src/app/automation/page.tsx:1983, 1990, 2014-2023, 5759, 5779, 5798-5817`
- `trend-video-frontend/src/app/api/images/crawl/route.ts:40, 80, 117-133`
- `trend-video-frontend/src/workers/unified-worker.js:499-513`
- `trend-video-backend/src/image_crawler/image_crawler_working.py:1913, 1921-1927, 2018-2030, 2922, 2932`

---
