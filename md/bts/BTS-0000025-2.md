# BTS-0000025 (#2): unified-worker YouTube ì¤‘ë³µ ì—…ë¡œë“œ ë°©ì§€ ë¡œì§ ëˆ„ë½

**ë°œìƒì¼:** 2025-12-03

**ìƒíƒœ:** âœ… **í•´ê²°ë¨**

**ì‹¬ê°ë„:** ğŸŸ¡ **HIGH** - ê°™ì€ ì˜ìƒì´ ë‘ ë²ˆ ì—…ë¡œë“œë¨

**ì¦ìƒ:**
```
[INFO] ì—…ë¡œë“œ ì‹œì‘: ... (2ë²ˆ)
[INFO] ì—…ë¡œë“œ ì™„ë£Œ: https://youtu.be/3DomhIRyUrc (2ë²ˆ)
[INFO] ì¸ë„¤ì¼ ì—…ë¡œë“œ ì¤€ë¹„ ì¤‘... (2ë²ˆ)
```

**ê·¼ë³¸ ì›ì¸:**
unified-worker.jsì— ì¤‘ë³µ ì—…ë¡œë“œ ë°©ì§€ ë¡œì§(runningUploads Map)ì´ ì—†ìŒ

**ìˆ˜ì • ë‚´ì—­:**
`src/workers/unified-worker.js` ìˆ˜ì •
1. runningYoutubeUploads Map ì¶”ê°€ (line 147)
2. youtube ì—…ë¡œë“œ ì‹œì‘ ì‹œ ë½ ì„¤ì • (line 578-585)
3. ì™„ë£Œ/ì‹¤íŒ¨/ì—ëŸ¬ ì‹œ ë½ í•´ì œ (line 838-855)

**êµ¬í˜„:**
```javascript
// Constructor
this.runningYoutubeUploads = new Map();

// ì‹œì‘ ì‹œ ë½ ì„¤ì •
if (this.runningYoutubeUploads.has(taskId)) {
  throw new Error('ì´ë¯¸ ì—…ë¡œë“œê°€ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.');
}
this.runningYoutubeUploads.set(taskId, Date.now());

// ì¢…ë£Œ ì‹œ ë½ í•´ì œ (ì„±ê³µ/ì‹¤íŒ¨/ì—ëŸ¬ ëª¨ë‘)
this.runningYoutubeUploads.delete(taskId);
```

**ì°¸ê³ :**
- /api/youtube/upload/route.ts:14-15, 56-68 ì°¸ê³ 

---
